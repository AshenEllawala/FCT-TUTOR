<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Page</title>
    <link rel="stylesheet" href="css/registration.css">
</head>

<body>


    <div class="container">
        <div class="registration-box">
            <h1 style="font-weight: 550">Registration</h1>

            <div class="success-message" id="successMessage">
                Registration submitted successfully!
            </div>
            <div class="error-message" id="errorMessage" style="display:none;color:#b00020;margin-bottom:12px;"></div>

            <form id="student_registrationForm" action="signup_student.php" method="POST">
                <div class="form-group">
                    <input type="text" name="s_id" id="studentid" placeholder="Student Id :" required>
                </div>

                <div class="form-group">
                    <input type="text" name="u_name" id="username" placeholder="Username :" required>
                </div>

                <div class="form-group">
                    <input type="password" name="pwd" id="password" placeholder="Password :" required>
                </div>
                <div class="form-group">
                    <input type="email" name="email" id="email" placeholder="University Email:" required>
                </div>

                <div class="button-group">
                    <button type="submit" name="submit" class="submit-btn">Submit</button>
                    <button type="button" name="clear" class="clear-btn" id="clearBtn">Clear</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/student_registration.js"></script>
    <script>
        // Show server error messages passed via URL query param
        (function(){
            function getQueryParam(name) {
                const params = new URLSearchParams(window.location.search);
                return params.get(name);
            }

            const err = getQueryParam('error');
            const errEl = document.getElementById('errorMessage');
            const successEl = document.getElementById('successMessage');

            if (!err) return;

            successEl.style.display = 'none';

            const map = {
                'emptyinput': 'Please fill all fields.',
                'invalidusername': 'Username contains invalid characters.',
                'invalidemail': 'Please enter a valid email address.',
                'usernametaken': 'Username or email already exists.',
                'stmtfailed': 'Server error. Please try again later.'
            };

            if (err === 'none') {
                successEl.style.display = 'block';
                errEl.style.display = 'none';
            } else {
                errEl.textContent = map[err] || 'An error occurred.';
                errEl.style.display = 'block';
            }
        })();
    </script>
</body>

</html>